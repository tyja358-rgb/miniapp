<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Discount Hub ⚡</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
h2 { color: #333; text-align: center; }
button { padding: 8px 15px; margin: 5px; border-radius: 5px; cursor: pointer; background-color: #4CAF50; color: white; border: none; transition: 0.2s; }
button:hover { background-color: #45a049; }
input, select { padding: 5px; margin: 5px; }
#discounts { margin-top: 20px; }
.discount-item { padding: 10px; border: 1px solid #ccc; border-radius: 5px; margin-bottom: 10px; background: #fff; }
.discount-item.used { opacity: 0.6; text-decoration: line-through; }
</style>
</head>
<body>

<h2>Discount Hub ⚡</h2>

<h3>Панель пользователя</h3>
<div id="discounts"></div>

<h3>Добавить скидку (для предпринимателей)</h3>
<div>
  <input type="text" id="shop" placeholder="Магазин">
  <input type="text" id="description" placeholder="Описание скидки">
  <input type="number" id="percent" placeholder="% скидки" min="1" max="100">
  <input type="date" id="expiry">
  <button id="addDiscount">Добавить скидку</button>
</div>

<script>
let discounts = JSON.parse(localStorage.getItem("discounts")) || [];

function renderDiscounts() {
  const container = document.getElementById("discounts");
  container.innerHTML = "";
  discounts.forEach((d, i) => {
    const div = document.createElement("div");
    div.className = "discount-item" + (d.used ? " used" : "");
    div.innerHTML = `<strong>${d.shop}</strong>: ${d.description} - ${d.percent}% до ${d.expiry}
      <button onclick="useDiscount(${i})" ${d.used ? "disabled" : ""}>Использовать</button>`;
    container.appendChild(div);
  });
}

function addDiscount() {
  const shop = document.getElementById("shop").value;
  const desc = document.getElementById("description").value;
  const percent = document.getElementById("percent").value;
  const expiry = document.getElementById("expiry").value;
  if(!shop || !desc || !percent || !expiry) { alert("Заполните все поля"); return; }
  discounts.push({shop, description: desc, percent, expiry, used: false});
  localStorage.setItem("discounts", JSON.stringify(discounts));
  renderDiscounts();
}

function useDiscount(index) {
  discounts[index].used = true;
  localStorage.setItem("discounts", JSON.stringify(discounts));
  renderDiscounts();
  alert("Скидка использована! ✅");
}

document.getElementById("addDiscount").addEventListener("click", addDiscount);
renderDiscounts();
</script>

</body>
</html>
